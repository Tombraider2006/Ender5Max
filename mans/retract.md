<h3 align="right"><a href="https://www.tinkoff.ru/rm/yakovleva.irina203/51ZSr71845" target="_blank">ваше "спасибо" автору</a></h3>
<h3 align="right"><a href="https://t.me/tombraider2006" target="_blank">телеграм канал автора</a></h3>
<h5 align="right">поставьте "звездочку" проекту. так другим пользователям легче его найти.</h5>

<h2> управляем ретрактом во время печати.</h2>

в прошивке клиппер возможно управлять ретрактом во время печати. это нужно если вы внезапно увидели, что ваш пластик отсырел и начал тянуть сопли,  а у вас уже прошло "n" часов печати и так лень все начинать заново. но для этого нужно немного подготовительной работы. 

первое. в орке заходим в настройки принтера и ставим галки "использовать откат из прошивки" 

![](/images/firm_retract.png)

убираем галочку очистка сопла при откате во вкладке экструдер

![](/images/clear_nozle_orca.png)

далее в стартовом коде принтера добавляем блок:

```
SET_RETRACTION RETRACT_LENGTH=[retraction_length] RETRACT_SPEED=[retraction_speed] UNRETRACT_EXTRA_LENGTH=[retract_restart_extra] UNRETRACT_SPEED=[deretraction_speed]
RESPOND TYPE=command MSG="Retraction length set to [retraction_length]mm" 
RESPOND TYPE=command MSG="Retract speed set to [retraction_speed]/[deretraction_speed]mm/c"
```

![](/images/start_code.png)

не забывайте вписывать значение отката для своего пластика когда настраиваете.

например так:

![](/images/orca3.jpg)

далее переходим в принтер и открываем файл printer.cfg

вписываем такой раздел:

```
[firmware_retraction]
retract_length: 0.43 # безопасное значение для того пластика которым чаще всего печатаете.
retract_speed: 30
unretract_extra_length: 0
unretract_speed: 30

```
после перезагрузки если вы не увидели нового раздела в правом верхнем углу тыкаем в три точки и ищем следующий раздел:

![](/images/fluid1.jpg)

внутри находим раздел "настройки отката" и ставим галочку

![](/images/fluid2.jpg)

В результате у нас появится новый раздел в веб панели с помощью которого вы можете прямо во время печати управлять вашим ретрактом. 

![](/images/fluid3.jpg)

проверить все ли у вас правильно перед печатью можно нарезав модель и сохранив ее на диск, далее открываем файл с помошью текстового редактора и ищем `Move Z Axis up` 

![](/images/test1.jpg)

убеждаемся что у нас есть команда **set_retraction** и то что там у нас цифры, а так же что дальше у нас есть команда **G10**  которая означает что послана команда на ретракт который будет обработан прошивкой. 