Прошивка картографера для Windows

## Вход в режим DFU

Вход в режим DFU может быть немного затруднительным, но как только вы освоитесь, все станет довольно просто.

Подключите USB-кабель к ПК с ОС Windows, с которого вы будете производить прошивку, и к датчику Cartographer. 

Используя пинцет из железа или аналогичный инструмент, соедините контакты 1 (boot0), как только на них будет достигнут прочный контакт, коснитесь контакта 2 (сброс) другим инструментом из железа.

![](/images/image_plate_dfu.png)


Если вы все сделали правильно, ваше устройство должно перейти в режим DFU.

Windows — выполните следующие действия.

Меню «Пуск»

Найдите и откройте «Диспетчер устройств».

Прокрутите вниз до раздела Устройства универсальной последовательной шины.

Вы должны увидеть STM32 BOOTLOADER как опцию.

![](/images/image_win_dfu.png)


## Прошивка через STM32CubeProgrammer Windows 

скачать программу можно с [официального сайта](https://www.st.com/en/development-tools/stm32cubeprog.html) но исключительно через VPN и регистрацию. Или можно по ссылке с телеграмм группы [пользователей Ender 5 max](https://t.me/Ender_5_Max_Ru/5283)

Откройте приложение и СПРАВА выберите следующие параметры и нажмите Подключиться .

![](/images/image_stm32_dfu.png)

Для прошивки Cartographer вам нужно установить адрес `0x08002000` Это обеспечивает смещение в 8 КБ для прошивки. Прошивка загрузчика Katapult может быть прошита по умолчанию `0x08000000`.

![](/images/stm32_dfu_util.png)

На каждой прошивке нажмите "Download", начиная с Katapult, затем Cartographer. Теперь нажмите Disconnect в ВЕРХНЕМ ПРАВОМ углу.

Если мигает СИНИЙ светодиод, значит, вы не полностью обновили прошивку и вам следует начать заново. Если вы сейчас выключите и включите питание зонда или просто нажмете на контакты RESET (2), как было сделано ранее, ваш зонд должен отреагировать, если под него поместить что-то твердое металлическое.