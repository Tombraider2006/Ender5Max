Прошивка картографера с помощью Wsl из Windows


### Установка wsl


Открываем командную строку windows пишем `cmd` в поиске правой кнопкой мыши на иконке и ищем строку **запуск с правами администратора**

```
wsl --install
```
*Примечание:
Приведенная выше команда работает только в том случае, если WSL не установлен вообще. Если вы запускаете `wsl --install` и видите текст справки WSL, попробуйте `wsl --list --online` просмотреть список доступных дистрибутивов и запустить `wsl --install -d <DistroName>` для установки дистрибутива.*

Подробно про  установку можно [почитать тут](https://learn.microsoft.com/ru-ru/windows/wsl/install) 


### Устанавливаем ubuntu 

```
wsl.exe --install Ubuntu-24.04
```

Запускаем
```
wsl.exe -d Ubuntu-24.04
```

 вписываем имя пользователя и пароль, пароль отображаться не будет, это нормально, повторяем ввод пароля

будет правильным сразу проверить и установить обновления

```
sudo apt update && sudo apt upgrade -y
```

выходим пока из установленного дистрибутива, так как нам надо еще доустановить пакет для usb подключения.  

```
 exit
```
### Увидеть USB в Linux 

Устанавливаем пакет для того чтобы видеть подключенные usb устройства 

```
 winget install --interactive --exact dorssel.usbipd-win
```

Список всех USB-устройств, подключенных к Windows, откройте PowerShell **в режиме администратора** и введите следующую команду. После перечисления устройств выберите и скопируйте идентификатор шины устройства, который вы хотите подключить к WSL.
```
usbipd list
```

![](/images/pid_list.jpg)

**Обратите внимание на номер BUSID у себя, он может отличаться от того что в мануале**

Перед присоединением USB-устройства необходимо использовать команду usbipd bind для совместного использования устройства, что позволяет подключить его к WSL. Для этого требуются права администратора. Выберите идентификатор шины устройства, который вы хотите использовать в WSL, и выполните следующую команду. После выполнения команды убедитесь, что устройство используется совместно, повторно выполнив команду `usbipd list`.


```
usbipd bind --busid 1-2
```

![](/images/bind_usb.jpg)

Чтобы подключить USB-устройство, выполните следующую команду. (Вам больше не нужно использовать командную строку администратора с повышенными привилегиями.) Убедитесь, что командная строка WSL открыта, чтобы поддерживать работу  виртуальной машины WSL 2. Обратите внимание, что до тех пор, пока USB-устройство подключено к WSL, оно не может использоваться Windows. После подключения к WSL USB-устройство может использоваться любым дистрибутивом, работающим как WSL 2. Убедитесь, что устройство подключено с помощью `usbipd list`. В командной строке WSL выполните команду lsusb , чтобы убедиться, что USB-устройство отображается и может взаимодействовать с помощью средств Linux.

```
usbipd attach --wsl --busid <busid>
```
![](/images/usb_attach.jpg)

Откройте Ubuntu 

```
wsl
```

вводим 
```
lsusb
```

![](/images/lsusb_.jpg)


Вы увидите только что подключенное устройство и сможете взаимодействовать с ним с помощью обычных средств Linux. 

подробно можно [почитать тут](https://learn.microsoft.com/ru-ru/windows/wsl/connect-usb)

